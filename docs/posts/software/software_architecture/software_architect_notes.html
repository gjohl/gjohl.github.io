<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.549">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Gurpreet Johl">
<meta name="dcterms.date" content="2023-06-23">
<meta name="description" content="Notes on Software Architecture">

<title>Gurpreet Johl - Software Architecture Notes</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../../">
<script src="../../../site_libs/quarto-html/quarto.js"></script>
<script src="../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script src="../../../site_libs/quarto-contrib/glightbox/glightbox.min.js"></script>
<link href="../../../site_libs/quarto-contrib/glightbox/glightbox.min.css" rel="stylesheet">
<link href="../../../site_libs/quarto-contrib/glightbox/lightbox.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../../index.html">
    <span class="navbar-title">Gurpreet Johl</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../../projects.html"> 
<span class="menu-text">Projects</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../blog.html"> 
<span class="menu-text">Notes</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/gjohl"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.linkedin.com/in/gurpreetjohl"> <i class="bi bi-linkedin" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/gurpreetjohl"> <i class="bi bi-twitter" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Software Architecture Notes</h1>
                  <div>
        <div class="description">
          Notes on Software Architecture
        </div>
      </div>
                          <div class="quarto-categories">
                <div class="quarto-category">Engineering</div>
                <div class="quarto-category">Software</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Gurpreet Johl </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">June 23, 2023</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#software-architecture-notes" id="toc-software-architecture-notes" class="nav-link active" data-scroll-target="#software-architecture-notes">Software Architecture Notes</a>
  <ul class="collapse">
  <li><a href="#what-is-a-software-architect" id="toc-what-is-a-software-architect" class="nav-link" data-scroll-target="#what-is-a-software-architect">1. What is a software architect</a></li>
  <li><a href="#the-architects-mindset" id="toc-the-architects-mindset" class="nav-link" data-scroll-target="#the-architects-mindset">2. The architect’s mindset</a></li>
  <li><a href="#the-architecture-process" id="toc-the-architecture-process" class="nav-link" data-scroll-target="#the-architecture-process">3. The architecture process</a></li>
  <li><a href="#system-requirements" id="toc-system-requirements" class="nav-link" data-scroll-target="#system-requirements">4. System requirements</a>
  <ul class="collapse">
  <li><a href="#functional-requirements" id="toc-functional-requirements" class="nav-link" data-scroll-target="#functional-requirements">4.1. Functional requirements</a></li>
  <li><a href="#non-functional-requirements" id="toc-non-functional-requirements" class="nav-link" data-scroll-target="#non-functional-requirements">4.2. Non-functional requirements</a></li>
  </ul></li>
  <li><a href="#application-types" id="toc-application-types" class="nav-link" data-scroll-target="#application-types">5. Application types</a></li>
  <li><a href="#select-technology-stack" id="toc-select-technology-stack" class="nav-link" data-scroll-target="#select-technology-stack">6. Select technology stack</a>
  <ul class="collapse">
  <li><a href="#backend-technology" id="toc-backend-technology" class="nav-link" data-scroll-target="#backend-technology">6.1. Backend technology</a></li>
  <li><a href="#frontend-technology" id="toc-frontend-technology" class="nav-link" data-scroll-target="#frontend-technology">6.2. Frontend technology</a></li>
  <li><a href="#data-store-technology" id="toc-data-store-technology" class="nav-link" data-scroll-target="#data-store-technology">6.3. Data store technology</a></li>
  </ul></li>
  <li><a href="#the--ilities" id="toc-the--ilities" class="nav-link" data-scroll-target="#the--ilities">7. The *-ilities</a></li>
  <li><a href="#components-architecture" id="toc-components-architecture" class="nav-link" data-scroll-target="#components-architecture">8.Components architecture</a>
  <ul class="collapse">
  <li><a href="#layers" id="toc-layers" class="nav-link" data-scroll-target="#layers">8.1. Layers</a></li>
  <li><a href="#interfaces" id="toc-interfaces" class="nav-link" data-scroll-target="#interfaces">8.2. Interfaces</a></li>
  <li><a href="#solid" id="toc-solid" class="nav-link" data-scroll-target="#solid">8.3. SOLID</a></li>
  <li><a href="#naming-conventions" id="toc-naming-conventions" class="nav-link" data-scroll-target="#naming-conventions">8.4. Naming conventions</a></li>
  <li><a href="#exception-handling" id="toc-exception-handling" class="nav-link" data-scroll-target="#exception-handling">8.5. Exception handling</a></li>
  </ul></li>
  <li><a href="#design-patterns" id="toc-design-patterns" class="nav-link" data-scroll-target="#design-patterns">9. Design patterns</a></li>
  <li><a href="#system-architecture" id="toc-system-architecture" class="nav-link" data-scroll-target="#system-architecture">10. System architecture</a>
  <ul class="collapse">
  <li><a href="#loose-coupling" id="toc-loose-coupling" class="nav-link" data-scroll-target="#loose-coupling">10.1. Loose coupling</a></li>
  <li><a href="#stateless" id="toc-stateless" class="nav-link" data-scroll-target="#stateless">10.2. Stateless</a></li>
  <li><a href="#caching" id="toc-caching" class="nav-link" data-scroll-target="#caching">10.3. Caching</a></li>
  <li><a href="#messaging" id="toc-messaging" class="nav-link" data-scroll-target="#messaging">10.4. Messaging</a></li>
  <li><a href="#logging-and-monitoring" id="toc-logging-and-monitoring" class="nav-link" data-scroll-target="#logging-and-monitoring">10.5. Logging and monitoring</a></li>
  </ul></li>
  <li><a href="#external-considerations" id="toc-external-considerations" class="nav-link" data-scroll-target="#external-considerations">11. External considerations</a></li>
  <li><a href="#architecture-document" id="toc-architecture-document" class="nav-link" data-scroll-target="#architecture-document">12. Architecture document</a></li>
  <li><a href="#advanced-architecture-topics" id="toc-advanced-architecture-topics" class="nav-link" data-scroll-target="#advanced-architecture-topics">13. Advanced architecture topics</a>
  <ul class="collapse">
  <li><a href="#microservices" id="toc-microservices" class="nav-link" data-scroll-target="#microservices">13.1. Microservices</a></li>
  <li><a href="#event-sourcing" id="toc-event-sourcing" class="nav-link" data-scroll-target="#event-sourcing">13.2. Event sourcing</a></li>
  <li><a href="#cqrs" id="toc-cqrs" class="nav-link" data-scroll-target="#cqrs">13.3. CQRS</a></li>
  </ul></li>
  <li><a href="#soft-skills" id="toc-soft-skills" class="nav-link" data-scroll-target="#soft-skills">14. Soft skills</a></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references">References</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<section id="software-architecture-notes" class="level1">
<h1>Software Architecture Notes</h1>
<p>Notes from <a href="https://www.udemy.com/course/the-complete-guide-to-becoming-a-software-architect/">“The Complete Guide to Becoming a Software Architect” Udemy course</a></p>
<section id="what-is-a-software-architect" class="level2">
<h2 class="anchored" data-anchor-id="what-is-a-software-architect">1. What is a software architect</h2>
<p>A developer knows what can be done, an architect knows what should be done. How do we use technology to meet business requirements.</p>
<p>General system requirements:</p>
<ul>
<li>Fast</li>
<li>Secure</li>
<li>Reliable</li>
<li>Easy to maintain</li>
</ul>
<p>Architect’s need to know how to code for:</p>
<ul>
<li>Architecture’s trustworthiness</li>
<li>Support developers</li>
<li>Respect of developers</li>
</ul>
</section>
<section id="the-architects-mindset" class="level2">
<h2 class="anchored" data-anchor-id="the-architects-mindset">2. The architect’s mindset</h2>
<ul>
<li>Understand the business - Strengths, weaknesses, compettions, growth strategy.</li>
<li>Define the system’s goals - Goals are not requirements. Goals describe the effect on the organisation, requirements describe what the system should do.</li>
<li>Work for your client’s clients - Prioritise the end user.</li>
<li>Talk to the right people with the right language - What is the thing that really matters to the person I’m talking to?</li>
</ul>
<p>Project managers care about how things affect deadlines, developers care about the technologies used, CEOs care about business continuity and bottom line.</p>
</section>
<section id="the-architecture-process" class="level2">
<h2 class="anchored" data-anchor-id="the-architecture-process">3. The architecture process</h2>
<ol type="1">
<li>Understand the system requirements - What the system should do.</li>
<li>Understand the non-functional requirements - Technical and service level attributes, e.g.&nbsp;number of users, loads, volumes, performance.</li>
<li>Map the components - Understand the system functionality and communicate this to your client. Completely non-technical at this point, no mention of specific technologies. A diagram of high level components helps.</li>
<li>Select the technology stack - Backend, frontend, data store.</li>
<li>Design the architecture</li>
<li>Write the architecture document</li>
<li>Support the team</li>
</ol>
<p>Include developers in non-functional requirements and architecture design for two reasons:</p>
<ol type="1">
<li>Learn about unknown scenarios early</li>
<li>Create ambassadors</li>
</ol>
</section>
<section id="system-requirements" class="level2">
<h2 class="anchored" data-anchor-id="system-requirements">4. System requirements</h2>
<p>The 2 types of requirements: functional and non-functional.</p>
<section id="functional-requirements" class="level3">
<h3 class="anchored" data-anchor-id="functional-requirements">4.1. Functional requirements</h3>
<p>“What the system should do”</p>
<ul>
<li>Business flows</li>
<li>Business services</li>
<li>User interfaces</li>
</ul>
</section>
<section id="non-functional-requirements" class="level3">
<h3 class="anchored" data-anchor-id="non-functional-requirements">4.2. Non-functional requirements</h3>
<p>“What the system should deal with”</p>
<ul>
<li>Performance - latency and throughput
<ul>
<li>Latency - How long does it take to perform a single task?</li>
<li>Throughput - How many tasks can be performed in a given time unit?</li>
</ul></li>
<li>Load - Quantity of work without crashing. Determines the availability of the system. Always look at peak (worst case) numbers.</li>
<li>Data volume - How much data will the system accumulate over time?
<ul>
<li>Data required on day one</li>
<li>Data growth (say, annually)</li>
</ul></li>
<li>Concurrent users - How many users will be using the system? This includes “dead times” which differentiates it from the load requirement. Rule of thumb is concurrent_users = load * 10</li>
<li>SLA - Service Level Agreement for uptime.</li>
</ul>
<p>The non-functional requirements are generally the more important in determining the architecture. The client will generally need guiding towards sensible values, otherwise they just want as much load as possible, as much uptime as possible etc.</p>
</section>
</section>
<section id="application-types" class="level2">
<h2 class="anchored" data-anchor-id="application-types">5. Application types</h2>
<p>The application type should be established early based on the use case and expected user interaction.</p>
<ul>
<li>Web apps
<ul>
<li>Serve html pages.</li>
<li>UI; user-initiated actions; large scale; short, focused actions.</li>
<li>Request-response model.</li>
</ul></li>
<li>Web API
<ul>
<li>Serve data (often JSON).</li>
<li>Data retrieval and storage; client-initiated actions; large scale; short, focused actions.</li>
<li>Request-response model.</li>
</ul></li>
<li>Mobile
<ul>
<li>Require user interaction; frontend for web API; location-based.</li>
</ul></li>
<li>Console
<ul>
<li>No UI; limited interation; long-running processes; short actions for power users.</li>
<li>Require technical knowledge.</li>
</ul></li>
<li>Service
<ul>
<li>No UI; managed by service manager; long-running processes.</li>
</ul></li>
<li>Desktop
<ul>
<li>All resources on the PC; UI; user-centric actions.</li>
</ul></li>
<li>Function-as-a-service
<ul>
<li>AWS lambda</li>
</ul></li>
</ul>
</section>
<section id="select-technology-stack" class="level2">
<h2 class="anchored" data-anchor-id="select-technology-stack">6. Select technology stack</h2>
<p>Considerations:</p>
<ul>
<li>Appropriate for the task</li>
<li>Community - e.g.&nbsp;stack overflow activity</li>
<li>Popularity - google trends over 2 years</li>
</ul>
<section id="backend-technology" class="level3">
<h3 class="anchored" data-anchor-id="backend-technology">6.1. Backend technology</h3>
<p>Covers web app, web API, console, service.</p>
<p>Options: .NET, Java, node.js, PHP, Python</p>
<div id="fig-backend_tech" class="lightbox quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-backend_tech-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="backend_tech.png" class="lightbox" data-gallery="quarto-lightbox-gallery-1" data-glightbox="description: .lightbox-desc-1"><img src="backend_tech.png" class="img-fluid figure-img"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-backend_tech-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;1: Backend Tech
</figcaption>
</figure>
</div>
</section>
<section id="frontend-technology" class="level3">
<h3 class="anchored" data-anchor-id="frontend-technology">6.2. Frontend technology</h3>
<p>Covers:</p>
<ul>
<li>Web app - Angular, React</li>
<li>Mobile - Native (Swift, Java/Kotlin), Xamarin, React Native</li>
<li>Desktop - depends on target OS</li>
</ul>
</section>
<section id="data-store-technology" class="level3">
<h3 class="anchored" data-anchor-id="data-store-technology">6.3. Data store technology</h3>
<p>SQL - small, structured data</p>
<ul>
<li>Relational tables</li>
<li>Transactions
<ul>
<li>Atomicity</li>
<li>Consistency</li>
<li>Isolation</li>
<li>Durability</li>
</ul></li>
<li>Querying language is universal</li>
</ul>
<p>NoSQL - huge, unstructured or semi-structured data</p>
<ul>
<li>Emphasis on scale and performance.</li>
<li>Schema-less, with entities stored as JSON.</li>
<li>Eventual consistency - data can be temporarily inconsistent</li>
<li>No universal querying language</li>
</ul>
</section>
</section>
<section id="the--ilities" class="level2">
<h2 class="anchored" data-anchor-id="the--ilities">7. The *-ilities</h2>
<p>Quality attributes that describe technical capabilities to fulfill the non-functional requirements. Non-functional requirements map to quality attributes, which are designed in the architecture.</p>
<ul>
<li>Scalability - Adding computing resources without any interruption. Scale out (add more compute instances) is preferred over scale up (increase CPU, RAM on the existing instance). Scaling out introduces redundancy and is not limited by hardware.</li>
<li>Manageability - Know what’s going on and take action accordingly. The question “who reports the problems” determines if a system is manageable. The system should flag problems, not the suer.</li>
<li>Modularity - A system that is built from blcoks that can be changed or replaced without affecting the whole system.</li>
<li>Extensibility - Functionality of the system can be extended without modifying existing code.</li>
<li>Testability - How easy is it to test the application. Independent modules and methods and single responsibility principle aid testability.</li>
</ul>
</section>
<section id="components-architecture" class="level2">
<h2 class="anchored" data-anchor-id="components-architecture">8.Components architecture</h2>
<p>A software component is a piece of code that runs in a single process. Distributed systems are composed of independent software components deployed on separate processes/servers/containers.</p>
<p>Component architecture relates to the lower level details, whereas system architecture is the higher level view of how the components fit together to achieve the non-functional requirements.</p>
<section id="layers" class="level3">
<h3 class="anchored" data-anchor-id="layers">8.1. Layers</h3>
<p>Layers represent horizontal functionality:</p>
<ol type="1">
<li>UI/SI - user interface or service interface (i.e.&nbsp;an API), authentication</li>
<li>Business logic - validation, enrichment, computation</li>
<li>Data access layer - connection handling, transaction handling, querying/saving data</li>
</ol>
<p>Code can flow downwards by one layer only. It can never skip a layer and can never go up a layer. This enforces modularity.</p>
<p>A service might sit across layers, for example logging sits across the 3 layers described above. In this case, the logging service is called a “sross-cutting concern”.</p>
<p>Each layer should be independent of the implementation of other layers. Layers should handle exceptions from those below them, log the error and then throw a more generic exception, so that there is no reference to other layers’ implementation.</p>
<p>Layers are part of the same process. This is different from tiers, which are processes that are distributed across a network.</p>
</section>
<section id="interfaces" class="level3">
<h3 class="anchored" data-anchor-id="interfaces">8.2. Interfaces</h3>
<p>An interface declares the signature of an implementation. This means that each implementation must implement the methods described. The abstract base class in Python is an example of this.</p>
<p>Close coupling should be avoided; “new is glue”.</p>
</section>
<section id="solid" class="level3">
<h3 class="anchored" data-anchor-id="solid">8.3. SOLID</h3>
<ol type="1">
<li>Single responsibility principle: Each class, module or method should have exactly one responsibility.</li>
<li>Open/closed principle: Software should be open for extension but closed for modification. Can be implemented using class inheritance.</li>
<li>Liskov substitution principle: If S is a subtype of T, then objects of type T can be replaced with objects of type S without altering the program. This looks similar to polymorphism but is stricter; not only should the classes implement the same methods, but the behaviour of those methods should be the same too, there should be no hidden functionality performed by S that is not performed by T or vice versa.</li>
<li>Interface segregation principle: Many client-specific interfaces are preferable to one general purpose interface.</li>
<li>Dependency inversion principle: High-level modules should depend on abstractions rather than concrete implementations. Relies on dependency injection, where one object supplies the dependencies of another object. A factory method determines which class to load and returns an instance of that class. This also makes testing easier, as you can inject a mock class rather than having to mock out specific functionality.</li>
</ol>
</section>
<section id="naming-conventions" class="level3">
<h3 class="anchored" data-anchor-id="naming-conventions">8.4. Naming conventions</h3>
<ol type="1">
<li>Structure - case, underscores</li>
<li>Content - class names should be nouns, methods should be imperative verbs</li>
</ol>
</section>
<section id="exception-handling" class="level3">
<h3 class="anchored" data-anchor-id="exception-handling">8.5. Exception handling</h3>
<p>Some best practices:</p>
<ol type="1">
<li>Only catch exceptions if you are going to do something with it</li>
<li>Catch specific exceptions</li>
<li>Use try-catch on the smallest code fragments possible</li>
<li>Layers should handle exceptions raised by layers below them, without exposing the specific implementation of the other layer. Catch, log, re-raise a more generic error.</li>
</ol>
<p>Purposes of logging:</p>
<ol type="1">
<li>Track errors</li>
<li>Gather data</li>
</ol>
</section>
</section>
<section id="design-patterns" class="level2">
<h2 class="anchored" data-anchor-id="design-patterns">9. Design patterns</h2>
<p>A collection of general, reusable solutions to common software design problems. Popularised in the book “Design patterns: elements of reusable object-oriented software”.</p>
<ul>
<li>The factory pattern: Creating objects without specifying the exact class of the object. Avoids strong coupling between classes. Create an interface, then a factory method returns an instance of a class which implements that interface. If the implementation needs to change, we only need to change the factory method.</li>
<li>The repository pattern: Modules which don’t work with the data store should be oblivious to the type of data store. This is similar to the concept of the Data Access Layer. Layers are for architects, design patterns are for developers. They both seek to solve the same issue.</li>
<li>The facade pattern: Creating a layer of abstraction to mask complex actions. The facade does not create any new functionality, it is just a wrapper integrating existing modular functions together.</li>
<li>The command pattern: All the action’s information is encapsulated within an object.</li>
</ul>
</section>
<section id="system-architecture" class="level2">
<h2 class="anchored" data-anchor-id="system-architecture">10. System architecture</h2>
<p>The architecture design is the big picture that should answer the following:</p>
<ul>
<li>How will the system work under heavy load?</li>
<li>What will happen if the system crashes at a critical moment?</li>
<li>How complicated is it to update?</li>
</ul>
<p>The architecture should:</p>
<ol type="1">
<li>Define components</li>
<li>Define how components communicate</li>
<li>Define the system’s quality attributes</li>
</ol>
<p>Make the correct choice as early as possible</p>
<section id="loose-coupling" class="level3">
<h3 class="anchored" data-anchor-id="loose-coupling">10.1. Loose coupling</h3>
<p>Ensuring the services are not strongly tied to other services. Avoid the “spiderweb” - when the graph of connections between services is densely connected.</p>
<p>Prevents coupling of platforms and URLs.</p>
<p>To avoid URL coupling between services, two options are:</p>
<ul>
<li>“Yellow pages” directory</li>
<li>Gateway</li>
</ul>
<p>The “yellow pages” contains a directory of all service URLs. If service A wants to query service D, A queries the yellow pages for D’s URL, then uses that URL to query D. This means that service A does not hardcode any information about service D. If D’s URLs change, then only the yellow pages need to be updated. Services only need to know the yellow pages directory’s URL.</p>
<div id="fig-yellow_pages" class="lightbox quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-yellow_pages-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="yellow_pages.png" class="lightbox" data-gallery="quarto-lightbox-gallery-2" data-glightbox="description: .lightbox-desc-2"><img src="yellow_pages.png" class="img-fluid figure-img"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-yellow_pages-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;2: Yellow Pages
</figcaption>
</figure>
</div>
<p>The gateway acts as a middleman. It holds a mapping table of all URLs Service A queries the gateway, which in turn queries service E. Service A doesn’t need to know about E or any other services. Services only need to know the gateway’s URL.</p>
<div id="fig-gateway" class="lightbox quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-gateway-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="gateway.png" class="lightbox" data-gallery="quarto-lightbox-gallery-3" data-glightbox="description: .lightbox-desc-3"><img src="gateway.png" class="img-fluid figure-img"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-gateway-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;3: Gateway
</figcaption>
</figure>
</div>
</section>
<section id="stateless" class="level3">
<h3 class="anchored" data-anchor-id="stateless">10.2. Stateless</h3>
<p>The application’s state is stored in only 2 places:</p>
<ol type="1">
<li>The data store</li>
<li>The user interface</li>
</ol>
<p>Stateless architecture is preferred in virtually all circumstances.</p>
<p>In a stateful architecture, when a user logs in, the login service retrieves the user details from the database and stored them for future use. Data is stored in code.</p>
<p>If the login request was routed to server A, the user’s details are stored there. If the user later tried to add itemsto the cart and their cart service request is routed to server B, then their user details will not exist as those are stored on server A.</p>
<p>Disadvantages of stateful:</p>
<ul>
<li>Lack of scalability</li>
<li>Lack of redundancy</li>
</ul>
<div id="fig-stateful" class="lightbox quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-stateful-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="stateful.png" class="lightbox" data-gallery="quarto-lightbox-gallery-4" data-glightbox="description: .lightbox-desc-4"><img src="stateful.png" class="img-fluid figure-img"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-stateful-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;4: Stateful
</figcaption>
</figure>
</div>
<p>In a stateless architecture, no data is stored in the service itself. This means the behaviour will be the same regardless of which server a request was routed to.</p>
<div id="fig-stateless" class="lightbox quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-stateless-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="stateless.png" class="lightbox" data-gallery="quarto-lightbox-gallery-5" data-glightbox="description: .lightbox-desc-5"><img src="stateless.png" class="img-fluid figure-img"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-stateless-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;5: Stateless
</figcaption>
</figure>
</div>
</section>
<section id="caching" class="level3">
<h3 class="anchored" data-anchor-id="caching">10.3. Caching</h3>
<p>Caches store data locally to avoid retrieving the same data from the database multiple times. It trades reliability of data (it is stored in volatile memory) for improved performance.</p>
<p>A cache should store data that is frequently accessed and rarely modified.</p>
<p>Two types of cache:</p>
<ul>
<li>In-memory cache - Cache stored in memory on a single service
<ul>
<li>Pros:
<ul>
<li>Best performance</li>
<li>Can store any objects</li>
<li>Easy to use</li>
</ul></li>
<li>Cons:
<ul>
<li>Size is limited by the process’s memory</li>
<li>Can grow stale/inconsistent if the service is scaled out to multiple servers</li>
</ul></li>
</ul></li>
<li>Distributed cache - Cache is independent of the services and can be accessed by all servers
<ul>
<li>Pros:
<ul>
<li>Supports scaled out servers</li>
<li>Failover capabilities</li>
<li>Storage is unlimited</li>
</ul></li>
<li>Cons:
<ul>
<li>Setup is more complex</li>
<li>Often only support primitive data types</li>
<li>Worse performance than in-memory cache</li>
</ul></li>
</ul></li>
</ul>
</section>
<section id="messaging" class="level3">
<h3 class="anchored" data-anchor-id="messaging">10.4. Messaging</h3>
<p>Messaging methods can be evaluated on these criteria:</p>
<ul>
<li>Performance</li>
<li>Message size</li>
<li>Execution model</li>
<li>Feedback (handshaking) and reliability</li>
<li>Complexity</li>
</ul>
<p>Messaging methods include:</p>
<ul>
<li>REST API</li>
<li>HTTP Push</li>
<li>Queue</li>
<li>File-based and database-based methods</li>
</ul>
<section id="rest-api" class="level4">
<h4 class="anchored" data-anchor-id="rest-api">REST API</h4>
<p>Universal standard for HTTP-based systems.</p>
<p>Useful for traditional web apps.</p>
<div id="fig-rest_api" class="lightbox quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-rest_api-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="rest_api.png" class="lightbox" data-gallery="quarto-lightbox-gallery-6" data-glightbox="description: .lightbox-desc-6"><img src="rest_api.png" class="img-fluid figure-img"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-rest_api-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;6: REST API
</figcaption>
</figure>
</div>
<table class="table">
<colgroup>
<col style="width: 5%">
<col style="width: 95%">
</colgroup>
<thead>
<tr class="header">
<th>Criteria</th>
<th>Evaluation</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Performance</td>
<td>Very fast</td>
</tr>
<tr class="even">
<td>Message size</td>
<td>Same as HTTP protocol limitations - GET 8KB, POST ~10MB</td>
</tr>
<tr class="odd">
<td>Execution model</td>
<td>Request/response - ideal for quick, short actions</td>
</tr>
<tr class="even">
<td>Feedback</td>
<td>Immediate feedback via response codes</td>
</tr>
<tr class="odd">
<td>Complexity</td>
<td>Extremely easy</td>
</tr>
</tbody>
</table>
</section>
<section id="http-push" class="level4">
<h4 class="anchored" data-anchor-id="http-push">HTTP Push</h4>
<p>A client subscribes to the service waiting for an event. When that event occurs, the server notifies the client.</p>
<p>For real-time messaging, these often use web sockets to maintain the subscription connection, rather than a traditional request/response model.</p>
<p>Useful for chat or monitoring.</p>
<div id="fig-http_push" class="lightbox quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-http_push-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="http_push.png" class="lightbox" data-gallery="quarto-lightbox-gallery-7" data-glightbox="description: .lightbox-desc-7"><img src="http_push.png" class="img-fluid figure-img"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-http_push-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;7: HTTP Push
</figcaption>
</figure>
</div>
<table class="table">
<thead>
<tr class="header">
<th>Criteria</th>
<th>Evaluation</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Performance</td>
<td>Very fast</td>
</tr>
<tr class="even">
<td>Message size</td>
<td>Limited, few KB</td>
</tr>
<tr class="odd">
<td>Execution model</td>
<td>Web socket connection / long polling</td>
</tr>
<tr class="even">
<td>Feedback</td>
<td>None (fire and forget)</td>
</tr>
<tr class="odd">
<td>Complexity</td>
<td>Extremely easy</td>
</tr>
</tbody>
</table>
</section>
<section id="queue" class="level4">
<h4 class="anchored" data-anchor-id="queue">Queue</h4>
<p>The queue sits between two (or more) services. If service A wants to send a message to service B, A places the message in the queue and B periodically pulls from the queue.</p>
<p>This ensures messages will be handled <strong>exactly</strong> once and in the order received.</p>
<p>Useful for complex systems with lots of data, when order and reliability are important.</p>
<div id="fig-queue" class="lightbox quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-queue-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="queue.png" class="lightbox" data-gallery="quarto-lightbox-gallery-8" data-glightbox="description: .lightbox-desc-8"><img src="queue.png" class="img-fluid figure-img"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-queue-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;8: Queue
</figcaption>
</figure>
</div>
<table class="table">
<colgroup>
<col style="width: 2%">
<col style="width: 97%">
</colgroup>
<thead>
<tr class="header">
<th>Criteria</th>
<th>Evaluation</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Performance</td>
<td>Slow - push/poll time and database persistence</td>
</tr>
<tr class="even">
<td>Message size</td>
<td>Unlimited but best practice to use small messages</td>
</tr>
<tr class="odd">
<td>Execution model</td>
<td>Polling</td>
</tr>
<tr class="even">
<td>Feedback</td>
<td>Very reliable but feedback depends on the monitoring in place to ensure messages make it to the queue and get executed</td>
</tr>
<tr class="odd">
<td>Complexity</td>
<td>Requires training and setup to maintain a queue engine</td>
</tr>
</tbody>
</table>
</section>
<section id="file-based-and-db-based" class="level4">
<h4 class="anchored" data-anchor-id="file-based-and-db-based">File-based and DB-based</h4>
<p>Similar to queue, but rather han placing messages in a queue it places them in a file directory or database. There is no guarantee that messages are processed once and only once.</p>
<p>If multiple services are polling the same file folder, then when a new file is added we can get two issues:</p>
<ol type="1">
<li>File locked</li>
<li>Duplicate processing</li>
</ol>
<p>Similar use case to queues, but queues are generally preferred.</p>
<div id="fig-file_based_messaging" class="lightbox quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-file_based_messaging-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="file_based_messaging.png" class="lightbox" data-gallery="quarto-lightbox-gallery-9" data-glightbox="description: .lightbox-desc-9"><img src="file_based_messaging.png" class="img-fluid figure-img"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-file_based_messaging-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;9: File-based Messaging
</figcaption>
</figure>
</div>
<table class="table">
<colgroup>
<col style="width: 4%">
<col style="width: 95%">
</colgroup>
<thead>
<tr class="header">
<th>Criteria</th>
<th>Evaluation</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Performance</td>
<td>Slow - push/poll time and database persistence</td>
</tr>
<tr class="even">
<td>Message size</td>
<td>Unlimited</td>
</tr>
<tr class="odd">
<td>Execution model</td>
<td>Polling</td>
</tr>
<tr class="even">
<td>Feedback</td>
<td>Very reliable but feedback depends on the monitoring</td>
</tr>
<tr class="odd">
<td>Complexity</td>
<td>Requires training and setup to maintain the filestore or database</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="logging-and-monitoring" class="level3">
<h3 class="anchored" data-anchor-id="logging-and-monitoring">10.5. Logging and monitoring</h3>
<section id="central-logging-service" class="level4">
<h4 class="anchored" data-anchor-id="central-logging-service">Central logging service</h4>
<p>Create a central logging service that all other services call to write to a central database. This solves the problem where each microservice has its own log format, data and location. For example, some might be in files, SQL database, NoSQL database, etc.</p>
<p>Implementation can be via an API or polling folders that each of the services write to.</p>
<div id="fig-central_logging_service" class="lightbox quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-central_logging_service-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="central_logging_service.png" class="lightbox" data-gallery="quarto-lightbox-gallery-10" data-glightbox="description: .lightbox-desc-10"><img src="central_logging_service.png" class="img-fluid figure-img"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-central_logging_service-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;10: Central Logging Service
</figcaption>
</figure>
</div>
</section>
<section id="correlation-id" class="level4">
<h4 class="anchored" data-anchor-id="correlation-id">Correlation ID</h4>
<p>Correlation ID is an identifier attached to the beginning of a user flow and is attached to any action taken by that user, so that if there is an error at any point the user flow can be traced back through the different services’ logs.</p>
</section>
</section>
</section>
<section id="external-considerations" class="level2">
<h2 class="anchored" data-anchor-id="external-considerations">11. External considerations</h2>
<p>External considerations can affect architecture and design decisions.</p>
<ul>
<li>Deadlines</li>
<li>Dev team skills - New technologies can introduce uncertainty, delays and low quality</li>
<li>IT support - Assign who will support the product from the outset. This should not be developers.</li>
<li>Cost - Build vs buy. Estimate cost vs value. Spend money to save time, don’t spend time to save money.</li>
</ul>
</section>
<section id="architecture-document" class="level2">
<h2 class="anchored" data-anchor-id="architecture-document">12. Architecture document</h2>
<p>This should describe the basic elements of the system:</p>
<ul>
<li>Technology stack</li>
<li>Components</li>
<li>Services</li>
<li>Communication between components and services</li>
</ul>
<p>No development should begin before the document is complete.</p>
<p>Goals of the document:</p>
<ul>
<li>Describe what should be developed and how</li>
<li>List the functional and non-functional requirements</li>
</ul>
<p>Audience:</p>
<ul>
<li>Everyone involved with the system: project manager, CTO, QA leader, developers</li>
<li>Sections for management appear first as they are unlikely to read the whole document</li>
<li>QA lead can begin preparing test infrastructure ahead of time</li>
</ul>
<p>Format: UML (universal modeling language) is often used. It visualises the system’s design with concepts and diagrams. However, this assumes the audience is familiar with UML which is often not the case.</p>
<ul>
<li>Keep the contents as simple as possible</li>
<li>Use plain English</li>
<li>Visualise using whatever software is comfortable and appropriate</li>
</ul>
<p>Structure:</p>
<ul>
<li>Background</li>
<li>Requirements</li>
<li>Executive summary</li>
<li>Architecture overview</li>
<li>Components drill-down</li>
</ul>
<section id="background" class="level4">
<h4 class="anchored" data-anchor-id="background">Background</h4>
<p>This section validates your point of view and instils confidence that you understand the project.</p>
<p>One page for all team and management.</p>
<p>Describe the system from a business POV:</p>
<ul>
<li>The system’s role</li>
<li>Reasons for replacing the old system</li>
<li>Expected business impact</li>
</ul>
<section id="requirements" class="level5">
<h5 class="anchored" data-anchor-id="requirements">Requirements</h5>
<p>Functional and non-functional requirements - what should the system do and deal with? This section validates your understadning of the requirements. The requirements dictate the architecture so this section sets the scene for the chosen architecture.</p>
<p>One page for all team and management.</p>
<p>This should be a brief, bullet point list of requirements with no more than 3 lines on each.</p>
</section>
</section>
<section id="executive-summary" class="level4">
<h4 class="anchored" data-anchor-id="executive-summary">Executive summary</h4>
<p>Provide a high-level view of the architecture.</p>
<p>Managers will not read the whole document; &lt;3 pages for management.</p>
<ul>
<li>Use charts and diagrams</li>
<li>Write this after the rest of the document</li>
<li>Use technical terms sparsely and only well known ones</li>
<li>Be concise and don’t repeat yourself</li>
</ul>
</section>
<section id="architecture-overview" class="level4">
<h4 class="anchored" data-anchor-id="architecture-overview">Architecture overview</h4>
<p>Provide a high-level view of the architecture in technical terms. Do not deep dive into specific components</p>
<p>&lt;10 pages for developers and QA lead.</p>
<ul>
<li>General description: type and major non-functional requirements</li>
<li>High-level diagram of logical components, no specifics about hardware or technologies</li>
<li>Diagram walkthrough: describe the various parts and their roles</li>
<li>Technology stack: iff there is a single stack include it here, otherwise include it in the components drill down section</li>
</ul>
</section>
<section id="components-drill-down" class="level4">
<h4 class="anchored" data-anchor-id="components-drill-down">Components drill down</h4>
<p>Detailed description of each component.</p>
<p>Unlimited length, for developers and QA lead.</p>
<p>For each component:</p>
<ul>
<li>Component’s role</li>
<li>Technology stack: Data store, backend, frontend</li>
<li>Component’s architecture: Describe the API (URL, logic, response code, comments). Describe the layers. Mention design patterns here.</li>
<li>Development instructions: Specific development guidelines</li>
</ul>
<p>Be specific and include rationale behind decisions.</p>
</section>
</section>
<section id="advanced-architecture-topics" class="level2">
<h2 class="anchored" data-anchor-id="advanced-architecture-topics">13. Advanced architecture topics</h2>
<p>These architecture patterns solve specific problems but add complexity to the system, so the costs and benefits should be compared.</p>
<section id="microservices" class="level3">
<h3 class="anchored" data-anchor-id="microservices">13.1. Microservices</h3>
<p>An architecture in which functionalities are implemented as separate, loosely coupled services that interact with each other using a standard lightweight protocol.</p>
<p>Problems with monolithic services:</p>
<ul>
<li>A single exception can crash the whole process</li>
<li>Updates impact all components</li>
<li>Limited to one development platform/language</li>
<li>Unoptimised compute resources</li>
</ul>
<p>With microservices, each service is independent of others so can be updated separately, use a different platform, and be optimised separately.</p>
<p>An example of splitting a monolithic architecture into microservices:</p>
<div id="fig-monolith_example" class="lightbox quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-monolith_example-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="monolith_example.png" class="lightbox" data-gallery="quarto-lightbox-gallery-11" data-glightbox="description: .lightbox-desc-11"><img src="monolith_example.png" class="img-fluid figure-img"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-monolith_example-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;11: Monolith Example
</figcaption>
</figure>
</div>
<p>As a microservice architecture, this becomes:</p>
<div id="fig-microservice_example" class="lightbox quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-microservice_example-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="microservice_example.png" class="lightbox" data-gallery="quarto-lightbox-gallery-12" data-glightbox="description: .lightbox-desc-12"><img src="microservice_example.png" class="img-fluid figure-img"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-microservice_example-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;12: Microservice Example
</figcaption>
</figure>
</div>
<p>Problems with microservices:</p>
<ul>
<li>Complex monitoring of all services and their interactions</li>
<li>Complex architecture</li>
<li>Complex testing</li>
</ul>
</section>
<section id="event-sourcing" class="level3">
<h3 class="anchored" data-anchor-id="event-sourcing">13.2. Event sourcing</h3>
<p>Storing the deltas to each entity rather than updating it. The events can then be “rebuilt” from the start to give a view of the state at any given point in time.</p>
<p>Use when history matters.</p>
<div id="fig-event_sourcing" class="lightbox quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-event_sourcing-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="event_sourcing.png" class="lightbox" data-gallery="quarto-lightbox-gallery-13" data-glightbox="description: .lightbox-desc-13"><img src="event_sourcing.png" class="img-fluid figure-img"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-event_sourcing-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;13: Event Sourcing
</figcaption>
</figure>
</div>
<p>Pros:</p>
<ul>
<li>Tracing history</li>
<li>Simple data model</li>
<li>Performance</li>
<li>Reporting</li>
</ul>
<p>Cons:</p>
<ul>
<li>No unified view - need to rebuild all events from the start to see the current state</li>
<li>Storage usage</li>
</ul>
</section>
<section id="cqrs" class="level3">
<h3 class="anchored" data-anchor-id="cqrs">13.3. CQRS</h3>
<p>Command query responsibility segregation. Data storage and data retrieval are two separate databases, with a sync service between the two.</p>
<p>This integrates nicely with event sourcing, where events (deltas) are stored in one database and the current state is periodically built and stored in the retrieval database.</p>
<div id="fig-cqrs" class="lightbox quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-cqrs-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="cqrs.png" class="lightbox" data-gallery="quarto-lightbox-gallery-14" data-glightbox="description: .lightbox-desc-14"><img src="cqrs.png" class="img-fluid figure-img"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-cqrs-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;14: CQRS
</figcaption>
</figure>
</div>
<p>Pros:</p>
<ul>
<li>Useful with high-frequency updates that require near real-time querying</li>
</ul>
<p>Cons:</p>
<ul>
<li>Complexity - need 2 databases, a sync service, ETL between the storage and retrieval database</li>
</ul>
</section>
</section>
<section id="soft-skills" class="level2">
<h2 class="anchored" data-anchor-id="soft-skills">14. Soft skills</h2>
<p>The architect is often not the direct line manager of the developers implementing the software. You ultimately work with people, not software. <strong>Influence without authority</strong> is key.</p>
<ul>
<li>Listening - assume you are not the smartest person in the room, collective wisdom is always better.</li>
<li>Dealing with criticism
<ul>
<li>Genuine questioning: Provide facts and logic, be willing to go back and check again</li>
<li>Mocking: Don’t attack back, provide facts and logic</li>
</ul></li>
<li>Be smart not right</li>
<li>Organisational politics - be aware of it but don’t engage in it</li>
<li>Public speaking - define a goal, know your audience, be confident, don’t read, maintain eye contact</li>
<li>Learning - blogs (DZone, InfoQ, O’Reilly), articles, conferences</li>
</ul>
</section>
<section id="references" class="level2">
<h2 class="anchored" data-anchor-id="references">References</h2>
<ul>
<li><a href="https://www.udemy.com/course/the-complete-guide-to-becoming-a-software-architect/">“The Complete Guide to Becoming a Software Architect” Udemy course</a></li>
<li><a href="https://refactoring.guru/">Design patterns</a></li>
</ul>


<div class="hidden" aria-hidden="true">
<span class="glightbox-desc lightbox-desc-1">Figure&nbsp;1: Backend Tech</span>
<span class="glightbox-desc lightbox-desc-2">Figure&nbsp;2: Yellow Pages</span>
<span class="glightbox-desc lightbox-desc-3">Figure&nbsp;3: Gateway</span>
<span class="glightbox-desc lightbox-desc-4">Figure&nbsp;4: Stateful</span>
<span class="glightbox-desc lightbox-desc-5">Figure&nbsp;5: Stateless</span>
<span class="glightbox-desc lightbox-desc-6">Figure&nbsp;6: REST API</span>
<span class="glightbox-desc lightbox-desc-7">Figure&nbsp;7: HTTP Push</span>
<span class="glightbox-desc lightbox-desc-8">Figure&nbsp;8: Queue</span>
<span class="glightbox-desc lightbox-desc-9">Figure&nbsp;9: File-based Messaging</span>
<span class="glightbox-desc lightbox-desc-10">Figure&nbsp;10: Central Logging Service</span>
<span class="glightbox-desc lightbox-desc-11">Figure&nbsp;11: Monolith Example</span>
<span class="glightbox-desc lightbox-desc-12">Figure&nbsp;12: Microservice Example</span>
<span class="glightbox-desc lightbox-desc-13">Figure&nbsp;13: Event Sourcing</span>
<span class="glightbox-desc lightbox-desc-14">Figure&nbsp;14: CQRS</span>
</div>
</section>
</section>

<a onclick="window.scrollTo(0, 0); return false;" role="button" id="quarto-back-to-top"><i class="bi bi-arrow-up"></i> Back to top</a></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<script>var lightboxQuarto = GLightbox({"selector":".lightbox","loop":false,"closeEffect":"zoom","openEffect":"zoom","descPosition":"bottom"});
window.onload = () => {
  lightboxQuarto.on('slide_before_load', (data) => {
    const { slideIndex, slideNode, slideConfig, player, trigger } = data;
    const href = trigger.getAttribute('href');
    if (href !== null) {
      const imgEl = window.document.querySelector(`a[href="${href}"] img`);
      if (imgEl !== null) {
        const srcAttr = imgEl.getAttribute("src");
        if (srcAttr && srcAttr.startsWith("data:")) {
          slideConfig.href = srcAttr;
        }
      }
    } 
  });

  lightboxQuarto.on('slide_after_load', (data) => {
    const { slideIndex, slideNode, slideConfig, player, trigger } = data;
    if (window.Quarto?.typesetMath) {
      window.Quarto.typesetMath(slideNode);
    }
  });

};
          </script>




</body></html>